# Tab Tá»•ng há»£p Káº¿t quáº£ Tá»‘i Æ°u hÃ³a

## ğŸ“‹ Tá»•ng quan

Tab má»›i **"Tá»•ng há»£p Káº¿t quáº£ Tá»‘i Æ°u hÃ³a"** Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ giÃºp ngÆ°á»i dÃ¹ng so sÃ¡nh vÃ  phÃ¢n tÃ­ch káº¿t quáº£ tá»« cÃ¡c mÃ´ hÃ¬nh tá»‘i Æ°u hÃ³a danh má»¥c Ä‘áº§u tÆ° khÃ¡c nhau, tá»« Ä‘Ã³ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh Ä‘áº§u tÆ° tá»‘t nháº¥t.

## âœ¨ TÃ­nh nÄƒng chÃ­nh

### 1. **Báº£ng So sÃ¡nh Tá»•ng quan**
- So sÃ¡nh cÃ¡c chá»‰ sá»‘ quan trá»ng cá»§a táº¥t cáº£ mÃ´ hÃ¬nh:
  - Lá»£i nhuáº­n ká»³ vá»ng (%)
  - Rá»§i ro - Äá»™ lá»‡ch chuáº©n (%)
  - Tá»· lá»‡ Sharpe
  - Tá»· lá»‡ Return/Risk
  - Sá»‘ lÆ°á»£ng mÃ£ cá»• phiáº¿u
  - Vá»‘n sá»­ dá»¥ng vÃ  vá»‘n cÃ²n láº¡i
  - Tá»· lá»‡ sá»­ dá»¥ng vá»‘n (%)
  - Chá»‰ sá»‘ Ä‘a dáº¡ng hÃ³a

- **Highlight tá»± Ä‘á»™ng**: CÃ¡c giÃ¡ trá»‹ tá»‘t nháº¥t Ä‘Æ°á»£c tÃ´ mÃ u xanh
- **Export CSV**: Táº£i xuá»‘ng báº£ng so sÃ¡nh Ä‘á»ƒ phÃ¢n tÃ­ch offline

### 2. **Biá»ƒu Ä‘á»“ PhÃ¢n tÃ­ch**
- **Biá»ƒu Ä‘á»“ Rá»§i ro - Lá»£i nhuáº­n**: Scatter plot so sÃ¡nh vá»‹ trÃ­ cá»§a cÃ¡c mÃ´ hÃ¬nh
- **Biá»ƒu Ä‘á»“ Tá»· lá»‡ Sharpe**: Bar chart so sÃ¡nh hiá»‡u suáº¥t Ä‘iá»u chá»‰nh theo rá»§i ro
- **Biá»ƒu Ä‘á»“ Äa dáº¡ng hÃ³a**: So sÃ¡nh má»©c Ä‘á»™ phÃ¢n tÃ¡n Ä‘áº§u tÆ° vÃ  sá»‘ lÆ°á»£ng mÃ£ CP
- **Biá»ƒu Ä‘á»“ PhÃ¢n bá»• Trá»ng sá»‘**: Pie charts hiá»ƒn thá»‹ cáº¥u trÃºc danh má»¥c cá»§a tá»«ng mÃ´ hÃ¬nh

### 3. **Chi tiáº¿t PhÃ¢n bá»•**
- **Báº£ng So sÃ¡nh Trá»ng sá»‘**: Xem tá»· trá»ng cá»§a tá»«ng mÃ£ cá»• phiáº¿u trong cÃ¡c mÃ´ hÃ¬nh
- **Báº£ng Sá»‘ lÆ°á»£ng Cá»• phiáº¿u**: Chi tiáº¿t sá»‘ lÆ°á»£ng cá»• phiáº¿u cáº§n mua cho má»—i mÃ£

### 4. **Khuyáº¿n nghá»‹ Äáº§u tÆ°**
- **Xáº¿p háº¡ng Top 3**: Tá»± Ä‘á»™ng xáº¿p háº¡ng cÃ¡c mÃ´ hÃ¬nh dá»±a trÃªn Ä‘iá»ƒm tá»•ng há»£p
- **PhÃ¢n tÃ­ch Äiá»ƒm máº¡nh**: Chá»‰ ra Æ°u Ä‘iá»ƒm cá»§a tá»«ng mÃ´ hÃ¬nh
- **HÆ°á»›ng dáº«n Lá»±a chá»n**: Gá»£i Ã½ mÃ´ hÃ¬nh phÃ¹ há»£p vá»›i tá»«ng má»¥c tiÃªu Ä‘áº§u tÆ°

## ğŸ¯ CÃ¡c chá»‰ sá»‘ Ä‘Ã¡nh giÃ¡

### Chá»‰ sá»‘ cÆ¡ báº£n
1. **Lá»£i nhuáº­n ká»³ vá»ng**: Lá»£i nhuáº­n dá»± kiáº¿n hÃ ng nÄƒm (%)
2. **Rá»§i ro (Std)**: Äá»™ lá»‡ch chuáº©n, Ä‘o lÆ°á»ng biáº¿n Ä‘á»™ng
3. **Tá»· lá»‡ Sharpe**: Lá»£i nhuáº­n trÃªn má»—i Ä‘Æ¡n vá»‹ rá»§i ro (cÃ ng cao cÃ ng tá»‘t)
4. **Return/Risk**: Tá»· lá»‡ lá»£i nhuáº­n/rá»§i ro trá»±c tiáº¿p

### Chá»‰ sá»‘ nÃ¢ng cao
5. **Chá»‰ sá»‘ Äa dáº¡ng hÃ³a** (0-1):
   - TÃ­nh báº±ng Herfindahl Index Ä‘áº£o ngÆ°á»£c
   - GiÃ¡ trá»‹ gáº§n 1: Äa dáº¡ng hÃ³a tá»‘t
   - GiÃ¡ trá»‹ gáº§n 0: Táº­p trung vÃ o Ã­t mÃ£ CP

6. **Tá»· lá»‡ Sá»­ dá»¥ng Vá»‘n**: 
   - Pháº§n trÄƒm vá»‘n Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº§u tÆ°
   - GiÃºp Ä‘Ã¡nh giÃ¡ hiá»‡u quáº£ triá»ƒn khai

7. **Sá»‘ mÃ£ CP & Tá»•ng sá»‘ cá»• phiáº¿u**:
   - ÄÃ¡nh giÃ¡ tÃ­nh kháº£ thi cá»§a danh má»¥c
   - Xem xÃ©t chi phÃ­ giao dá»‹ch

## ğŸ”„ CÃ¡ch sá»­ dá»¥ng

### BÆ°á»›c 1: Cháº¡y cÃ¡c mÃ´ hÃ¬nh tá»‘i Æ°u hÃ³a
1. VÃ o tab **"Tá»± chá»n mÃ£ cá»• phiáº¿u"** hoáº·c **"Há»‡ thá»‘ng Ä‘á» xuáº¥t mÃ£ cá»• phiáº¿u tá»± Ä‘á»™ng"**
2. Chá»n danh sÃ¡ch cá»• phiáº¿u
3. Cháº¡y cÃ¡c mÃ´ hÃ¬nh tá»‘i Æ°u hÃ³a:
   - Markowitz
   - Max Sharpe
   - Min Volatility
   - Min CVaR
   - Min CDaR
   - HRP

### BÆ°á»›c 2: Xem káº¿t quáº£ tá»•ng há»£p
1. Chuyá»ƒn sang tab **"Tá»•ng há»£p Káº¿t quáº£ Tá»‘i Æ°u hÃ³a"**
2. Chá»n cháº¿ Ä‘á»™ hiá»ƒn thá»‹ (Tá»± chá»n hoáº·c Äá» xuáº¥t tá»± Ä‘á»™ng)
3. Xem cÃ¡c tab phÃ¢n tÃ­ch:
   - **Báº£ng So sÃ¡nh Tá»•ng quan**: Xem tá»•ng quan nhanh
   - **Biá»ƒu Ä‘á»“ PhÃ¢n tÃ­ch**: Trá»±c quan hÃ³a so sÃ¡nh
   - **Chi tiáº¿t PhÃ¢n bá»•**: Xem chi tiáº¿t cáº¥u trÃºc danh má»¥c
   - **Khuyáº¿n nghá»‹ Äáº§u tÆ°**: Nháº­n gá»£i Ã½ tá»« há»‡ thá»‘ng

### BÆ°á»›c 3: Ra quyáº¿t Ä‘á»‹nh
- Dá»±a trÃªn báº£ng xáº¿p háº¡ng vÃ  phÃ¢n tÃ­ch
- CÃ¢n nháº¯c má»¥c tiÃªu Ä‘áº§u tÆ° cÃ¡ nhÃ¢n:
  - **Má»¥c tiÃªu tÄƒng trÆ°á»Ÿng**: Chá»n mÃ´ hÃ¬nh cÃ³ Sharpe vÃ  Return cao
  - **Má»¥c tiÃªu an toÃ n**: Chá»n Min Volatility hoáº·c Min CVaR
  - **CÃ¢n báº±ng**: Chá»n Markowitz hoáº·c Max Sharpe
  - **Äa dáº¡ng hÃ³a**: Chá»n HRP

## ğŸ’¾ Quáº£n lÃ½ dá»¯ liá»‡u

### LÆ°u trá»¯ tá»± Ä‘á»™ng
- Káº¿t quáº£ tá»« má»—i mÃ´ hÃ¬nh Ä‘Æ°á»£c tá»± Ä‘á»™ng lÆ°u vÃ o session state
- PhÃ¢n biá»‡t giá»¯a cháº¿ Ä‘á»™ "Tá»± chá»n" vÃ  "Äá» xuáº¥t tá»± Ä‘á»™ng"
- Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng káº¿t quáº£ Ä‘Ã£ lÆ°u trong sidebar

### XÃ³a dá»¯ liá»‡u
- NÃºt **"XÃ³a táº¥t cáº£ káº¿t quáº£"** trong sidebar cá»§a tab Tá»•ng há»£p
- XÃ³a riÃªng biá»‡t cho tá»«ng cháº¿ Ä‘á»™ (Manual/Auto)

## ğŸ“Š VÃ­ dá»¥ phÃ¢n tÃ­ch

### Ká»‹ch báº£n 1: NhÃ  Ä‘áº§u tÆ° Æ°u tiÃªn lá»£i nhuáº­n
```
Káº¿t quáº£:
- Max Sharpe: Return 25%, Risk 18%, Sharpe 1.28 â­
- Markowitz: Return 23%, Risk 16%, Sharpe 1.31 
- Min Volatility: Return 15%, Risk 12%, Sharpe 1.08

â†’ Khuyáº¿n nghá»‹: Max Sharpe (cÃ¢n báº±ng tá»‘t giá»¯a return cao vÃ  sharpe)
```

### Ká»‹ch báº£n 2: NhÃ  Ä‘áº§u tÆ° Æ°u tiÃªn an toÃ n
```
Káº¿t quáº£:
- Min Volatility: Return 15%, Risk 12%, Sharpe 1.08 â­
- Min CVaR: Return 16%, Risk 13%, Sharpe 1.07
- HRP: Return 18%, Risk 14%, Sharpe 1.12

â†’ Khuyáº¿n nghá»‹: Min Volatility (rá»§i ro tháº¥p nháº¥t)
```

### Ká»‹ch báº£n 3: NhÃ  Ä‘áº§u tÆ° cÃ¢n báº±ng
```
Káº¿t quáº£:
- Markowitz: Return 23%, Risk 16%, Sharpe 1.31 â­
- HRP: Return 20%, Risk 15%, Sharpe 1.20, Diversification 0.85
- Max Sharpe: Return 25%, Risk 18%, Sharpe 1.28

â†’ Khuyáº¿n nghá»‹: Markowitz (Sharpe cao nháº¥t, cÃ¢n báº±ng tá»‘t)
```

## ğŸ› ï¸ Cáº¥u trÃºc ká»¹ thuáº­t

### Files má»›i
1. **`scripts/optimization_comparison.py`**: Module chÃ­nh chá»©a táº¥t cáº£ logic so sÃ¡nh
2. **`FEATURE_COMPARISON_TAB.md`**: TÃ i liá»‡u hÆ°á»›ng dáº«n

### Files Ä‘Ã£ cáº­p nháº­t
1. **`scripts/dashboard.py`**: 
   - ThÃªm tab má»›i vÃ o menu
   - LÆ°u káº¿t quáº£ tá»‘i Æ°u hÃ³a
   - Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng káº¿t quáº£ trong sidebar

2. **`scripts/utils/session_manager.py`**:
   - ThÃªm `manual_optimization_results` vÃ  `auto_optimization_results`
   - ThÃªm cÃ¡c hÃ m `save_optimization_result()`, `get_optimization_results()`, `clear_optimization_results()`

### CÃ¡c hÃ m chÃ­nh

#### `calculate_portfolio_metrics(result)`
TÃ­nh toÃ¡n cÃ¡c chá»‰ sá»‘ Ä‘Ã¡nh giÃ¡ tá»« káº¿t quáº£ tá»‘i Æ°u hÃ³a

#### `create_comparison_table(results_dict)`
Táº¡o báº£ng so sÃ¡nh tá»•ng quan

#### `highlight_best_values(df)`
TÃ´ mÃ u cÃ¡c giÃ¡ trá»‹ tá»‘t nháº¥t trong báº£ng

#### `plot_risk_return_comparison(results_dict)`
Váº½ biá»ƒu Ä‘á»“ scatter rá»§i ro - lá»£i nhuáº­n

#### `plot_sharpe_comparison(results_dict)`
Váº½ biá»ƒu Ä‘á»“ cá»™t so sÃ¡nh Sharpe ratio

#### `plot_allocation_comparison(results_dict)`
Váº½ pie charts so sÃ¡nh phÃ¢n bá»• trá»ng sá»‘

#### `plot_diversification_comparison(results_dict)`
Váº½ biá»ƒu Ä‘á»“ so sÃ¡nh Ä‘a dáº¡ng hÃ³a

#### `provide_investment_recommendation(results_dict)`
ÄÆ°a ra khuyáº¿n nghá»‹ Ä‘áº§u tÆ° tá»± Ä‘á»™ng

#### `render_optimization_comparison_tab(results_dict)`
HÃ m chÃ­nh render toÃ n bá»™ tab

## ğŸ“ CÃ´ng thá»©c tÃ­nh toÃ¡n

### 1. Tá»· lá»‡ Sharpe
```
Sharpe Ratio = (Return - Risk_Free_Rate) / Volatility
```

### 2. Return/Risk Ratio
```
Return/Risk = Expected_Return / Volatility
```

### 3. Chá»‰ sá»‘ Äa dáº¡ng hÃ³a (Normalized Herfindahl)
```
H = Î£(wiÂ²)  # Herfindahl Index
Diversification Index = (1 - H) / (1 - 1/N)
```
Trong Ä‘Ã³:
- `wi`: Trá»ng sá»‘ cá»§a cá»• phiáº¿u i
- `N`: Sá»‘ lÆ°á»£ng cá»• phiáº¿u trong danh má»¥c
- GiÃ¡ trá»‹ = 1: Äa dáº¡ng hÃ³a hoÃ n háº£o (trá»ng sá»‘ Ä‘á»u nhau)
- GiÃ¡ trá»‹ = 0: Táº­p trung hoÃ n toÃ n (1 mÃ£ CP)

### 4. Tá»· lá»‡ Sá»­ dá»¥ng Vá»‘n
```
Capital Utilization = (Total_Invested / Total_Capital) Ã— 100%
```

### 5. Äiá»ƒm Tá»•ng há»£p (cho xáº¿p háº¡ng)
```
Score = Sharpe_Ratio Ã— 40 
      + Expected_Return Ã— 30 
      + Diversification Ã— 20 
      + Capital_Utilization Ã— 10
```

## ğŸ” Tips sá»­ dá»¥ng hiá»‡u quáº£

1. **So sÃ¡nh Ã­t nháº¥t 3-4 mÃ´ hÃ¬nh** Ä‘á»ƒ cÃ³ cÃ¡i nhÃ¬n toÃ n diá»‡n
2. **ChÃº Ã½ Ä‘áº¿n Sharpe Ratio** - Ä‘Ã¢y lÃ  chá»‰ sá»‘ quan trá»ng nháº¥t
3. **Xem xÃ©t má»¥c tiÃªu cÃ¡ nhÃ¢n** trÆ°á»›c khi quyáº¿t Ä‘á»‹nh
4. **Kiá»ƒm tra tÃ­nh kháº£ thi**: Sá»‘ lÆ°á»£ng mÃ£ CP, vá»‘n cÃ²n láº¡i
5. **Káº¿t há»£p vá»›i Backtesting** Ä‘á»ƒ xÃ¡c nháº­n hiá»‡u suáº¥t lá»‹ch sá»­
6. **Export CSV** Ä‘á»ƒ lÆ°u trá»¯ vÃ  so sÃ¡nh theo thá»i gian

## ğŸš€ TÃ­nh nÄƒng tÆ°Æ¡ng lai (Roadmap)

- [ ] LÆ°u káº¿t quáº£ vÃ o database/file
- [ ] So sÃ¡nh káº¿t quáº£ giá»¯a cÃ¡c phiÃªn khÃ¡c nhau
- [ ] ThÃªm cÃ¡c chá»‰ sá»‘ risk-adjusted khÃ¡c (Sortino, Calmar, ...)
- [ ] TÃ­ch há»£p Monte Carlo simulation
- [ ] Export bÃ¡o cÃ¡o PDF
- [ ] ThÃªm biá»ƒu Ä‘á»“ so sÃ¡nh Efficient Frontier
- [ ] PhÃ¢n tÃ­ch sensitivity cá»§a cÃ¡c mÃ´ hÃ¬nh

## ğŸ“ Há»— trá»£

Náº¿u gáº·p váº¥n Ä‘á» hoáº·c cÃ³ Ä‘á» xuáº¥t cáº£i tiáº¿n, vui lÃ²ng:
1. Kiá»ƒm tra log trong console
2. Äáº£m báº£o Ä‘Ã£ cháº¡y Ã­t nháº¥t 1 mÃ´ hÃ¬nh tá»‘i Æ°u hÃ³a
3. Thá»­ xÃ³a káº¿t quáº£ vÃ  cháº¡y láº¡i

---

**PhiÃªn báº£n**: 1.0  
**NgÃ y táº¡o**: 28/11/2025  
**TÃ¡c giáº£**: GitHub Copilot
